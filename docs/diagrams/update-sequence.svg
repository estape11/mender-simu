<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="778px" preserveAspectRatio="none" style="width:432px;height:778px;background:#FFFFFF;" version="1.1" viewBox="0 0 432 778" width="432px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="541.0625" style="stroke:#000000;stroke-width:1.5;" width="416.8486" x="10" y="142.5625"/><rect fill="none" height="451.6641" style="stroke:#000000;stroke-width:1.5;" width="396.8486" x="20" y="224.9609"/><rect fill="none" height="177.6016" style="stroke:#000000;stroke-width:1.5;" width="376.8486" x="30" y="492.0234"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Device" id="part1-lifeline"><g><title>Device</title><rect fill="#000000" fill-opacity="0.00000" height="633.3281" width="8" x="66.9395" y="67.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="70" x2="70" y1="67.2969" y2="700.625"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Mender" id="part2-lifeline"><g><title>Mender</title><rect fill="#000000" fill-opacity="0.00000" height="633.3281" width="8" x="297.7397" y="67.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="301.3291" x2="301.3291" y1="67.2969" y2="700.625"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="SQLite" id="part3-lifeline"><g><title>SQLite</title><rect fill="#000000" fill-opacity="0.00000" height="633.3281" width="8" x="366.9995" y="67.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="370.1504" x2="370.1504" y1="67.2969" y2="700.625"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Device" id="part1-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.8789" x="40" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.8789" x="47" y="55.9951">Device</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Device" id="part1-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.8789" x="40" y="699.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.8789" x="47" y="719.6201">Device</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Mender" id="part2-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66.8213" x="268.3291" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.8213" x="275.3291" y="55.9951">Mender</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Mender" id="part2-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66.8213" x="268.3291" y="699.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.8213" x="275.3291" y="719.6201">Mender</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="SQLite" id="part3-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.6982" x="345.1504" y="63.9951">SQLite</text><path d="M352.9995,15 C352.9995,5 370.9995,5 370.9995,5 C370.9995,5 388.9995,5 388.9995,15 L388.9995,41 C388.9995,51 370.9995,51 370.9995,51 C370.9995,51 352.9995,51 352.9995,41 L352.9995,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M352.9995,15 C352.9995,25 370.9995,25 370.9995,25 C370.9995,25 388.9995,25 388.9995,15" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="SQLite" id="part3-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.6982" x="345.1504" y="712.6201">SQLite</text><path d="M352.9995,725.9219 C352.9995,715.9219 370.9995,715.9219 370.9995,715.9219 C370.9995,715.9219 388.9995,715.9219 388.9995,725.9219 L388.9995,751.9219 C388.9995,761.9219 370.9995,761.9219 370.9995,761.9219 C370.9995,761.9219 352.9995,761.9219 352.9995,751.9219 L352.9995,725.9219" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M352.9995,725.9219 C352.9995,735.9219 370.9995,735.9219 370.9995,735.9219 C370.9995,735.9219 388.9995,735.9219 388.9995,725.9219" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="289.7397,94.4297,299.7397,98.4297,289.7397,102.4297,293.7397,98.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="98.4297" y2="98.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.6958" x="77.9395" y="93.3638">POST /auth_requests (signed)</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg2"><polygon fill="#181818" points="81.9395,123.5625,71.9395,127.5625,81.9395,131.5625,77.9395,127.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="75.9395" x2="300.7397" y1="127.5625" y2="127.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.4214" x="87.9395" y="122.4966">JWT Token</text></g><path d="M10,142.5625 L86.624,142.5625 L86.624,149.6953 L76.624,159.6953 L10,159.6953 L10,142.5625" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="541.0625" style="stroke:#000000;stroke-width:1.5;" width="416.8486" x="10" y="142.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="25" y="155.6294">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.2056" x="101.624" y="154.7729">[Every poll_interval]</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg3"><polygon fill="#181818" points="289.7397,176.8281,299.7397,180.8281,289.7397,184.8281,293.7397,180.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="180.8281" y2="180.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.7651" x="77.9395" y="175.7622">PATCH /inventory/attributes</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg4"><polygon fill="#181818" points="289.7397,205.9609,299.7397,209.9609,289.7397,213.9609,293.7397,209.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="209.9609" y2="209.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.6802" x="77.9395" y="204.895">GET /deployments/next</text></g><path d="M20,224.9609 L84.4429,224.9609 L84.4429,232.0938 L74.4429,242.0938 L20,242.0938 L20,224.9609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="451.6641" style="stroke:#000000;stroke-width:1.5;" width="396.8486" x="20" y="224.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="238.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146.0347" x="99.4429" y="237.1714">[Deployment Available]</text><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg5"><polygon fill="#181818" points="81.9395,259.2266,71.9395,263.2266,81.9395,267.2266,77.9395,263.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="75.9395" x2="300.7397" y1="263.2266" y2="263.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.0308" x="87.9395" y="258.1606">Deployment info</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg6"><polygon fill="#181818" points="289.7397,288.3594,299.7397,292.3594,289.7397,296.3594,293.7397,292.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="292.3594" y2="292.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.23" x="77.9395" y="287.2935">PUT status=downloading</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg7"><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="112.9395" y1="321.4922" y2="321.4922"/><line style="stroke:#181818;stroke-width:1;" x1="112.9395" x2="112.9395" y1="321.4922" y2="334.4922"/><line style="stroke:#181818;stroke-width:1;" x1="71.9395" x2="112.9395" y1="334.4922" y2="334.4922"/><polygon fill="#181818" points="81.9395,330.4922,71.9395,334.4922,81.9395,338.4922,77.9395,334.4922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.4331" x="77.9395" y="316.4263">Simulate download</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg8"><polygon fill="#181818" points="289.7397,359.625,299.7397,363.625,289.7397,367.625,293.7397,363.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="363.625" y2="363.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.2803" x="77.9395" y="358.5591">PUT status=installing</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg9"><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="112.9395" y1="392.7578" y2="392.7578"/><line style="stroke:#181818;stroke-width:1;" x1="112.9395" x2="112.9395" y1="392.7578" y2="405.7578"/><line style="stroke:#181818;stroke-width:1;" x1="71.9395" x2="112.9395" y1="405.7578" y2="405.7578"/><polygon fill="#181818" points="81.9395,401.7578,71.9395,405.7578,81.9395,409.7578,77.9395,405.7578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4834" x="77.9395" y="387.6919">Simulate install</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg10"><polygon fill="#181818" points="289.7397,430.8906,299.7397,434.8906,289.7397,438.8906,293.7397,434.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="434.8906" y2="434.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.9683" x="77.9395" y="429.8247">PUT status=rebooting</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg11"><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="112.9395" y1="464.0234" y2="464.0234"/><line style="stroke:#181818;stroke-width:1;" x1="112.9395" x2="112.9395" y1="464.0234" y2="477.0234"/><line style="stroke:#181818;stroke-width:1;" x1="71.9395" x2="112.9395" y1="477.0234" y2="477.0234"/><polygon fill="#181818" points="81.9395,473.0234,71.9395,477.0234,81.9395,481.0234,77.9395,477.0234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.1714" x="77.9395" y="458.9575">Simulate reboot</text></g><path d="M30,492.0234 L94.4429,492.0234 L94.4429,499.1563 L84.4429,509.1563 L30,509.1563 L30,492.0234" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="177.6016" style="stroke:#000000;stroke-width:1.5;" width="376.8486" x="30" y="492.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="505.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212.5557" x="109.4429" y="504.2339">[Success (based on success_rate)]</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg12"><polygon fill="#181818" points="289.7397,526.2891,299.7397,530.2891,289.7397,534.2891,293.7397,530.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="530.2891" y2="530.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.1172" x="77.9395" y="525.2231">PUT status=success</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg13"><polygon fill="#181818" points="358.9995,555.4219,368.9995,559.4219,358.9995,563.4219,362.9995,559.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="364.9995" y1="559.4219" y2="559.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.3877" x="77.9395" y="554.356">Update artifact_name</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg14"><polygon fill="#181818" points="289.7397,584.5547,299.7397,588.5547,289.7397,592.5547,293.7397,588.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="588.5547" y2="588.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.8003" x="77.9395" y="583.4888">PATCH /inventory (new version)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="30" x2="406.8486" y1="597.5547" y2="597.5547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="53.249" x="35" y="607.7651">[Failure]</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg15"><polygon fill="#181818" points="289.7397,628.4922,299.7397,632.4922,289.7397,636.4922,293.7397,632.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="632.4922" y2="632.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.6147" x="77.9395" y="627.4263">PUT status=failure</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg16"><polygon fill="#181818" points="289.7397,657.625,299.7397,661.625,289.7397,665.625,293.7397,661.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="70.9395" x2="295.7397" y1="661.625" y2="661.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.2983" x="77.9395" y="656.5591">POST /log (error details)</text></g><?plantuml-src ZP9FJyCm3CNl-HG-ReUfzqaWJJ1020IedJXMRkEDYCmfYTknRq_wPz84HTsXKUN-_FmQlmgzcD9Ko0Atr9YIL7LMUYRMv9L6mG83GVhsP8IKwb5ON0_44bvVqWmIhEKZz_HLKv00is1sJ7gkUWWMaUyxb_3uda7cFecLiivLi6x87w5orkQ6XNo3LW6Cp5bbDm-G66w8nVbZWYBU5BLG6ENlrz6MfigwupvsX8JfMrH4qRP_VAh3ga5ZiR0KFm6C63vZ3MzTXutOssGG1AKELzeTs3hKXdU_u9DaQlQrHI4ueTEYXkEBjHTe3kIqfAV2ERb0iGTLXxMtbzPbII6kkOs61iSG-ahk8pxlk8dPGyCVjC_P4ZQLRYUtYTnYAJdZdlxN_HKDc34T8EOg6CUz7R8nn7TnqxMdI_njfz0kzTRjO4RUEm-Q9BQ4OHgt6stF-Fm0?></g></svg>